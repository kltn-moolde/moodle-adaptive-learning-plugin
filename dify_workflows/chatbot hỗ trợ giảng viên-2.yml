app:
  description: ''
  icon: ü§ñ
  icon_background: '#FFEAD5'
  mode: advanced-chat
  name: chatbot h·ªó tr·ª£ gi·∫£ng vi√™n
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/gemini:0.5.12@2a2bf8f78552bd52b1d2e51995daaa7b7c04b2572b29e661b14c1b773ab8d45a
    version: null
kind: app
version: 0.5.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_batch_limit: 10
        image_file_size_limit: 10
        single_chunk_attachment_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: Xin ch√†o, t√¥i l√† tr·ª£ l√Ω AI cho gi·∫£ng vi√™n trong kh√≥a h·ªçc, t√¥i
      c√≥ th·ªÉ gi√∫p b·∫°n t√≥m t·∫Øt t√¨nh h√¨nh ki·∫øn th·ª©c c·ªßa h·ªçc sinh trong kh√≥a h·ªçc hi·ªán
      t·∫°i v√† t·ª´ ƒë√≥ t·∫°o b·ªô c√¢u h·ªèi tr·∫Øc nghi·ªám ph√π h·ª£p v·ªõi h·ªçc sinh
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
    - T√¥i mu·ªën t·∫°o b·ªô c√¢u h·ªèi tr·∫Øc nghi·ªám
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInLoop: false
        sourceType: start
        targetType: if-else
      id: 1762988385452-source-1764076823822-target
      selected: false
      source: '1762988385452'
      sourceHandle: source
      target: '1764076823822'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: 1764076823822-ab2ca7f1-df0b-4c1b-a223-07995e678728-1764081625357-target
      selected: false
      source: '1764076823822'
      sourceHandle: ab2ca7f1-df0b-4c1b-a223-07995e678728
      target: '1764081625357'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: parameter-extractor
      id: 1764076823822-false-1764161342486-target
      selected: false
      source: '1764076823822'
      sourceHandle: 'false'
      target: '1764161342486'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: parameter-extractor
        targetType: if-else
      id: 1764161342486-source-1764161677022-target
      selected: false
      source: '1764161342486'
      sourceHandle: source
      target: '1764161677022'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: 1764161677022-false-1764081635357-target
      selected: false
      source: '1764161677022'
      sourceHandle: 'false'
      target: '1764081635357'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: http-request
      id: 1764161677022-true-17641618566470-target
      selected: false
      source: '1764161677022'
      sourceHandle: 'true'
      target: '17641618566470'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 17641618566470-source-1764162337255-target
      source: '17641618566470'
      sourceHandle: source
      target: '1764162337255'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: answer
      id: 1764162337255-source-1764162111941-target
      source: '1764162337255'
      sourceHandle: source
      target: '1764162111941'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        selected: false
        title: Start
        type: start
        variables: []
      height: 73
      id: '1762988385452'
      position:
        x: -670.0643548310446
        y: 978.9275300516374
      positionAbsolute:
        x: -670.0643548310446
        y: 978.9275300516374
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: ab2ca7f1-df0b-4c1b-a223-07995e678728
          conditions:
          - comparison_operator: contains
            id: e0c3e990-f96a-4817-bb48-1e33d481eeb2
            value: t·∫°o b·ªô c√¢u h·ªèi
            varType: string
            variable_selector:
            - sys
            - query
          id: ab2ca7f1-df0b-4c1b-a223-07995e678728
          logical_operator: and
        desc: 'c√≥ 3 nh√°nh: xem ki·∫øn th·ª©c c·ªßa h·ªçc sinh (query c√≥ ch·ª©a "Xem ki·∫øn th·ª©c"),
          t·∫°o b·ªô c√¢u h·ªèi, nh√°nh c√≤n l·∫°i l√† failback'
        selected: false
        title: IF/ELSE
        type: if-else
      height: 200
      id: '1764076823822'
      position:
        x: -315.4378962208392
        y: 999.9275300516374
      positionAbsolute:
        x: -315.4378962208392
        y: 999.9275300516374
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: 'Vui l√≤ng cung c·∫•p ƒë·∫ßy ƒë·ªß v√† ch√≠nh x√°c c√°c th√¥ng tin sau:

          1. S·ªë l∆∞·ª£ng c√¢u h·ªèi

          2. ƒê·ªô kh√≥ (d·ªÖ, trung b√¨nh, kh√≥)

          3. Ch·ªß ƒë·ªÅ c·ªßa b·ªô c√¢u h·ªèi (V√≠ d·ª•: tin 12 - tr√≠ tu·ªá nh√¢n t·∫°o)

          '
        selected: false
        title: Answer 2
        type: answer
        variables: []
      height: 164
      id: '1764081625357'
      position:
        x: 13.47339866561191
        y: 859.1475917065334
      positionAbsolute:
        x: 13.47339866561191
        y: 859.1475917065334
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: 'Xin l·ªói, th√¥ng tin b·∫°n cung c·∫•p kh√¥ng ch√≠nh x√°c. Vui l√≤ng ch·ªçn '
        selected: false
        title: Answer 3
        type: answer
        variables: []
      height: 116
      id: '1764081635357'
      position:
        x: 669.2231833259103
        y: 1310.7306549595037
      positionAbsolute:
        x: 669.2231833259103
        y: 1310.7306549595037
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        desc: LLM ki·ªÉm tra c√¢u h·ªèi
        instruction: "Xem c√¢u query c·ªßa user c√≥ ƒë·∫ßy ƒë·ªß 3 th√¥ng tin sau hay ch∆∞a:\n\
          1. S·ªë l∆∞·ª£ng c√¢u h·ªèi\n2. ƒê·ªô kh√≥ (d·ªÖ, trung b√¨nh, kh√≥)\n3. Ch·ªß ƒë·ªÅ c·ªßa b·ªô c√¢u\
          \ h·ªèi (V√≠ d·ª•: tin 12 - tr√≠ tu·ªá nh√¢n t·∫°o)\nN·∫øu ch∆∞a ƒë·ªß th√¨ is_enough = false\
          \ \nN·∫øu ƒë·ªß r·ªìi th√¨ extract parameters t∆∞∆°ng ·ª©ng v·ªõi:\n- topic: ch·ªß ƒë·ªÅ c·ªßa\
          \ b·ªô c√¢u h·ªèi\n- num_questions: s·ªë l∆∞·ª£ng c√¢u h·ªèi\n- difficulty: 1 trong 3\
          \ c√°i sau: easy/medium/hard\nv√† tr·∫£ v·ªÅ is_enough = true"
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: gemini-2.5-flash
          provider: langgenius/gemini/google
        parameters:
        - description: T√™n topic c·ªßa b·ªô c√¢u h·ªèi
          name: topic
          required: false
          type: string
        - description: S·ªë l∆∞·ª£ng c√¢u h·ªèi
          name: num_questions
          required: false
          type: number
        - description: ƒê·ªô kh√≥ (easy/medium/hard)
          name: difficulty
          required: false
          type: string
        - description: ƒë√£ cung c·∫•p ƒë·ªß th√¥ng tin hay ch∆∞a
          name: is_enough
          required: true
          type: boolean
        query:
        - sys
        - query
        reasoning_mode: prompt
        selected: false
        title: Parameter Extractor
        type: parameter-extractor
        vision:
          enabled: false
      height: 116
      id: '1764161342486'
      position:
        x: 13.47339866561191
        y: 1153.0018742700065
      positionAbsolute:
        x: 13.47339866561191
        y: 1153.0018742700065
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: cac350ea-2735-4a2e-b63a-d0d7acc639fb
            value: true
            varType: boolean
            variable_selector:
            - '1764161342486'
            - is_enough
          id: 'true'
          logical_operator: and
        selected: false
        title: IF/ELSE 2
        type: if-else
      height: 124
      id: '1764161677022'
      position:
        x: 321.9246611258537
        y: 1153.0018742700065
      positionAbsolute:
        x: 321.9246611258537
        y: 1153.0018742700065
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-1819
            key: ''
            type: text
            value: '{

              "topic": "{{#1764161342486.topic#}}",

              "num_questions": {{#1764161342486.num_questions#}},

              "difficulty": "{{#1764161342486.difficulty#}}",

              "language": "vi",

              "save_to_db":true,

              "import_to_moodle": true,

              "course_id": 2

              }'
          type: json
        headers: ''
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        ssl_verify: true
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: HTTP Request (1)
        type: http-request
        url: http://139.99.103.223:5003/api/ai/generate-and-import
        variables: []
      height: 137
      id: '17641618566470'
      position:
        x: 669.2231833259103
        y: 1004.5390850382048
      positionAbsolute:
        x: 669.2231833259103
        y: 1004.5390850382048
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: 'T·∫°o b·ªô c√¢u h·ªèi v·ªõi ch·ªß ƒë·ªÅ {{#1764161342486.topic#}}, s·ªë c√¢u h·ªèi {{#1764161342486.num_questions#}},
          ƒë·ªô kh√≥ {{#1764161342486.difficulty#}} th√†nh c√¥ng!

          ƒê∆∞·ªùng d·∫´n xem b·ªô c√¢u h·ªèi: {{#1764162337255.view_url#}} '
        selected: false
        title: Answer 4
        type: answer
        variables: []
      height: 192
      id: '1764162111941'
      position:
        x: 1388.927284040516
        y: 1004.5390850382048
      positionAbsolute:
        x: 1388.927284040516
        y: 1004.5390850382048
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "def main(body: str) -> dict:\n    import json\n\n    # Parse JSON string\
          \ -> Python dict\n    parsed = json.loads(body)\n\n    # B·∫°n c√≥ th·ªÉ extract\
          \ field t√πy √Ω, v√≠ d·ª•:\n    message = parsed[\"message\"]\n    view_url =\
          \ parsed[\"view_questions_url\"]\n    first_question_name = parsed[\"questions\"\
          ][0][\"name\"]\n\n    # Tr·∫£ v·ªÅ object m√† Dify s·∫Ω nh·∫≠n ƒë∆∞·ª£c\n    return {\n\
          \        \"message\": message,\n        \"view_url\": view_url,\n      \
          \  \"first_question_name\": first_question_name,\n        \"raw\": parsed\
          \  # n·∫øu mu·ªën tr·∫£ v·ªÅ to√†n b·ªô lu√¥n\n    }\n"
        code_language: python3
        outputs:
          first_question_name:
            children: null
            type: string
          message:
            children: null
            type: string
          raw:
            children: null
            type: object
          view_url:
            children: null
            type: string
        selected: false
        title: Code
        type: code
        variables:
        - value_selector:
          - '17641618566470'
          - body
          value_type: string
          variable: body
      height: 52
      id: '1764162337255'
      position:
        x: 1015.5598410901155
        y: 1176.918534000692
      positionAbsolute:
        x: 1015.5598410901155
        y: 1176.918534000692
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: 339.76077852486895
      y: -123.58526811043242
      zoom: 0.537200830736528
  rag_pipeline_variables: []
