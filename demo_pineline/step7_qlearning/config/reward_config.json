{
  "version": "2.0",
  "description": "Reward calculator configuration for adaptive Q-Learning",
  
  "action_mappings": {
    "view_content": 0,
    "download_resource": 1,
    "view_assignment": 2,
    "attempt_quiz": 3,
    "submit_quiz": 4,
    "submit_assignment": 5,
    "review_quiz": 6,
    "post_forum": 7,
    "view_forum": 8
  },
  
  "reward_components": {
    "completion": {
      "weak": 5.0,
      "medium": 3.5,
      "strong": 2.0,
      "description": "Reward for completing an action"
    },
    "score_improvement": {
      "multiplier": 5.0,
      "milestone_bonus": {
        "weak": 2.0,
        "threshold": 0.7
      },
      "description": "Reward for improving score (delta * multiplier)"
    },
    "high_score_bonus": {
      "threshold": 0.9,
      "weak": 3.0,
      "medium": 2.0,
      "strong": 1.0,
      "description": "Bonus for achieving high score"
    },
    "progression": {
      "weak": {
        "any": 2.0
      },
      "medium": {
        "easy": 1.5,
        "medium": 3.0,
        "hard": 2.0
      },
      "strong": {
        "easy": 1.0,
        "medium": 2.5,
        "hard": 5.0
      },
      "description": "Reward based on action difficulty and cluster level"
    },
    "time_efficiency": {
      "enabled_for": ["strong"],
      "bonus": 1.5,
      "threshold_ratio": 0.8,
      "description": "Bonus for completing task faster than expected (strong clusters only)"
    },
    "engagement_bonus": {
      "high": 1.0,
      "medium": 0.5,
      "low": 0.0,
      "description": "Bonus based on engagement level from state"
    },
    "learning_phase_bonus": {
      "active": 1.0,
      "reflective": 1.5,
      "pre": 0.5,
      "description": "Bonus based on learning phase alignment with action"
    }
  },
  
  "penalties": {
    "frustration": {
      "enabled": false,
      "description": "Temporarily disabled - frustration always 0 in state",
      "values": {
        "weak": -2.0,
        "medium": -1.5,
        "strong": -1.0
      }
    },
    "failure": {
      "weak": -0.5,
      "medium": -1.0,
      "strong": -1.5,
      "description": "Penalty for failed action"
    },
    "low_engagement": {
      "enabled": true,
      "penalty": -0.5,
      "threshold": 0,
      "description": "Small penalty for low engagement level"
    }
  },
  
  "action_sequences": {
    "description": "Beneficial action sequences (previous → current → bonus multiplier)",
    "sequences": [
      {
        "from": "download_resource",
        "to": "attempt_quiz",
        "bonus": 1.5,
        "rationale": "Reading material before quiz demonstrates good preparation"
      },
      {
        "from": "view_content",
        "to": "attempt_quiz",
        "bonus": 1.2,
        "rationale": "Watching content before quiz shows active learning"
      },
      {
        "from": "attempt_quiz",
        "to": "review_quiz",
        "bonus": 1.0,
        "rationale": "Reviewing quiz after attempt promotes reflection"
      },
      {
        "from": "download_resource",
        "to": "submit_assignment",
        "bonus": 1.5,
        "rationale": "Reading before assignment enables knowledge application"
      },
      {
        "from": "view_content",
        "to": "submit_assignment",
        "bonus": 1.2,
        "rationale": "Watching content before assignment enables application"
      },
      {
        "from": "post_forum",
        "to": "attempt_quiz",
        "bonus": 1.0,
        "rationale": "Forum discussion before quiz encourages collaborative learning"
      },
      {
        "from": "view_forum",
        "to": "post_forum",
        "bonus": 0.8,
        "rationale": "Reading before posting shows thoughtful engagement"
      }
    ],
    "cluster_scaling": {
      "weak": 0.7,
      "medium": 1.0,
      "strong": 1.3,
      "description": "Scale sequence bonuses by cluster level"
    }
  },
  
  "normalization": {
    "enabled": true,
    "method": "clip",
    "min_reward": -5.0,
    "max_reward": 15.0,
    "description": "Clip rewards to prevent extreme values during Q-learning"
  },
  
  "cluster_classification": {
    "method": "grade_based",
    "exclude_cluster": 3,
    "description": "Classify clusters as weak/medium/strong based on mean_module_grade"
  }
}
